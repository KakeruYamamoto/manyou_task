<p id="notice"><%= notice %></p>

<h1>ユーザ管理画面</h1>
<div class="menu" class="container">

  <p>
  <nobr>

    <% if params[:sort_updated] %>
      <%= link_to "登録日順で並び替え", admin_users_path(sort_created: "true") %>
    <% elsif params[:sort_created] %>
      <%= link_to "更新順で並び替え", admin_users_path(sort_updated: "true") %>
    <% elsif params.dig(:user, :search) %>
      <%= link_to "全てのユーザを表示", admin_users_path(sort_created: "true") %>
    <% end %>

    <%= form_with(model: User.new,method: :get, url: admin_users_path, local: true) do |f| %>
      <%= f.label :user_name, "ユーザ名で検索" %>
      <%= f.text_field :user_name, class: 'form_control' , id: 'search_user_names' %>
      <%= f.label :email, "アドレスで検索" %>
      <%= f.text_field :email, id: 'form_control', name: 'select_status',include_blank: true, selected: '' %>
      <%= f.hidden_field :search, value: 'true' %>
      <%= f.submit '検索'%>
    <% end %>
  </nobr>
  </p>
</div>

<div class="content" class="container">
  <table>
    <thead>
      <tr>
        <th>ユーザー名</th>
        <th>メールアドレス</th>
        <th>パスワード</th>
        <th>登録日時</th>
        <th>更新日時</th>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= user.user_name %></td>
          <td><%= user.email %></td>
          <td><%= user.password_digest %></td>
          <td><%= user.created_at %></td>
          <td><%= user.updated_at %></td>
          <td><%= link_to '詳細', admin_user_path(user.id) %></td>
          <td><%= link_to '編集', edit_admin_user_path(user) %></td>
          <td><%= link_to '削除', user, method: :delete, data: { confirm: '本当に削除しますか?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<br>
<%= paginate @users %>
